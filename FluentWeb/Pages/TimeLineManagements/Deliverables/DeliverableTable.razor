@page "/Deliverables/{ProjectId:guid}/{Id:guid}/{IdType}"

@using Shared.Models.Deliverables.Responses


<FluentStack Orientation="Orientation.Vertical" Width="100%" HorizontalAlignment="HorizontalAlignment.Start" VerticalAlignment="VerticalAlignment.Top">
    <FluentStack Orientation="Orientation.Horizontal" HorizontalAlignment="HorizontalAlignment.Left" VerticalAlignment="VerticalAlignment.Center" Gap="8">
        <!-- Botón "Go Back" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.ArrowStepBack())" OnClick="@Navigation.NavigateBack" ToolTip="Go Back"></IconButton>

        <!-- Botón "Add New" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.Add())"
                    OnClick="@AddNew"
                    ToolTip="Add New Deliverable"
                    Disabled="@(CreateRow != null || EditRow != null)"></IconButton>

        <!-- Botón "Move Up" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.ArrowUp())"
                    OnClick="@Up"
                    ToolTip="Move the selected deliverable up in the hierarchy"
                    Disabled="@(DisableUpButton || CreateRow != null || EditRow != null)"></IconButton>

        <!-- Botón "Move Down" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.ArrowDown())"
                    OnClick="@Down"
                    ToolTip="Move the selected deliverable down in the hierarchy"
                    Disabled="@(DisableDownButton || CreateRow != null || EditRow != null)"></IconButton>

        <!-- Botón "Move Right" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.ArrowRight())"
                    OnClick="@Right"
                    ToolTip="Move the selected deliverable to a lower level"
                    Disabled="@(DisableRigthButton || CreateRow != null || EditRow != null)"></IconButton>

        <!-- Botón "Move Left" -->
        <IconButton IconEnd="@(new Icons.Regular.Size20.ArrowLeft())"
                    OnClick="@Left"
                    ToolTip="Move the selected deliverable to a higher level"
                    Disabled="@(DisableLeftButton || CreateRow != null || EditRow != null)"></IconButton>

        <FluentSpacer />
        <FluentLabel Typo="Typography.Body">Selected: <strong>@CurrentRowName</strong></FluentLabel>
    </FluentStack>

    <DeliverableRecursiveTable Items="@Items"
                               OnEdit="EditItem"
                               OnDelete="Delete"
                               OnDoubleClick="EditItem"
                               EditRow="@EditRow"
                               CreateRow="@CreateRow"
                               SelectedRow="@SelectedRow"
                               OnSaveCreate="Create"
                               OnSaveEdit="UpdateResponseAsync"
                               OnClick="RowClick"
                               OnCancelCreate="CancelCreate"
                               OnCancelEdit="CancelEdit"
                               OnChangeName="UpdateName"
                               OnChangeDependencies="UpdateDependencies"
                               OnChangeDependencyType="UpdateDependencyType"
                               OnChangeDuration="UpdateDuration"
                               OnChangeStartDate="UpdateStartDate"
                               OnChangeEndDate="UpdateEndDate" />
</FluentStack>



@code {



}
