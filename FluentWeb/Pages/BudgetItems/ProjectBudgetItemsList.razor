@using Shared.Models.Bennefits.Requests
@using Shared.Models.BudgetItems

<FluentStack Orientation="Orientation.Vertical" Style="width:100%;border:1px solid lightgray;border-radius:5px; padding:4px;">
    <div style="width:100%">
        <FluentGrid Spacing="@Spacing" AdaptiveRendering="true" Justify="@Justification" Style="padding: 4px;width:100%; ">
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Expenses, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sTotalExpenses</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Capital, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sTotalCapital</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Capital (w/o VAT), USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sTotalCapitalWithOutVAT</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Engineering, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sEngineeringBudget</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Contingency, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sContingenyBudget</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="2">
                <FluentLabel Typo="Typography.H6"><strong>Total Taxes, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sTaxesBudget</FluentLabel>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="12" md="6">
                <FluentLabel Typo="Typography.H6"><strong>Total Budget, USD</strong></FluentLabel>
                <FluentLabel Typo="Typography.H6">@Parent.sTotalBudget</FluentLabel>
            </FluentGridItem>
        </FluentGrid>
    </div>
    <div style="width:100%">
        <FluentStack Orientation="Orientation.Horizontal" VerticalAlignment="VerticalAlignment.Center"  Style="width:100%">
            <FluentLabel Typo="Typography.Subject" Style="overflow-wrap: break-word;"><strong>Manage Project Budget Items</strong></FluentLabel>
            <FluentSpacer />
            <FluentSearch @bind-Value="@nameFilter"
                          @oninput="@((arg)=>nameFilter=arg.Value==null?string.Empty:arg.Value!.ToString())"
                          Placeholder="Search..." />
        </FluentStack>
    </div>
    <FluentDataGrid Items="@FilteredItems.AsQueryable()"
                    Virtualize="true"
                    ItemSize="46"
                    Style="width:100%"
                    GenerateHeader="GenerateHeaderOption.Sticky"
                    TGridItem="IBudgetItemResponse">
        <PropertyColumn Title="Nomenclatore" Property="@(c => c.Nomenclatore)" Width="15%" />
        <PropertyColumn Title="Tag" Property="@(c => c.Tag)" Width="15%" />
        <PropertyColumn Title="Name" Property="@(c => c.Name)" Width="40%" />
        <PropertyColumn Title="Budget, USD" Property="@(c => c.sBudget)" Tooltip="true" Width="15%" />

        <TemplateColumn Title="Actions" Align="@Align.End" Width="15%">
            <FluentButton Id="@($"edit{context.Id}")" aria-label="Edit item" IconEnd="@(new Icons.Regular.Size16.Edit())" OnClick="@(() => EditBudgetItem(context))" />
            <FluentTooltip Anchor="@($"edit{context.Id}")" HideTooltipOnCursorLeave="true" Position=TooltipPosition.Top Delay=200>Edit</FluentTooltip>
            <FluentButton Id="@($"delete{context.Id}")" aria-label="Delete item" IconEnd="@(new Icons.Regular.Size16.Delete())" OnClick="@(() => Delete(context))" />
            <FluentTooltip Anchor="@($"delete{context.Id}")" HideTooltipOnCursorLeave="true" Position=TooltipPosition.Top Delay=200>Delete</FluentTooltip>

        </TemplateColumn>
    </FluentDataGrid>




</FluentStack>

@code {
    int Spacing = 1;
    JustifyContent Justification = JustifyContent.SpaceBetween;


}
